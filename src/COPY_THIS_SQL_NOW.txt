========================================
üîç STEP 1: RUN THIS FIRST TO SEE YOUR TABLE STRUCTURE
========================================

-- This will show us EXACTLY what columns exist in your loan_products table
SELECT 
  column_name,
  data_type,
  is_nullable
FROM information_schema.columns
WHERE table_name = 'loan_products'
ORDER BY ordinal_position;

========================================
üìã INSTRUCTIONS:
========================================
1. Go to Supabase Dashboard ‚Üí SQL Editor
2. Copy ONLY the SQL above
3. Run it
4. Copy the results and send them back to me
5. I'll create the correct SQL based on YOUR actual table structure

This is the safest approach - we'll see exactly what columns you have!

========================================
‚ö†Ô∏è WHY WE NEED THIS:
========================================
Your table structure is different from:
‚ùå The schema file (uses: product_name, min_duration_months, status)
‚ùå The migration file (uses: name, min_term, is_active)

Let's find out what YOU actually have deployed! üîç

========================================
üéØ ALTERNATIVE: SIMPLE FIX
========================================

If you want to try a simpler approach that just updates loans
without touching products, run this instead:

-- Show what product IDs exist
SELECT id, product_code FROM loan_products LIMIT 5;

-- If you see a product ID you want to use, update loans with:
UPDATE loans
SET product_id = 'YOUR-PRODUCT-UUID-HERE',
    updated_at = NOW()
WHERE product_id IS NULL 
   OR NOT EXISTS (
     SELECT 1 FROM loan_products WHERE id = loans.product_id
   );

Replace 'YOUR-PRODUCT-UUID-HERE' with an actual product ID from the first query.

========================================
